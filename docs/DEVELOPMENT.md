# Разработка

## Быстрый старт
```bash
npm install
npm run dev
```

## Скрипты
- `npm run dev` — запуск dev‑сервера.
- `npm run build` — production‑сборка.
- `npm run preview` — предпросмотр production‑сборки.

## Структура
- `pages/` — экраны приложения.
- `components/` — переиспользуемые компоненты и layout.
- `services/` — сиды и утилиты.
- `lib/` — внешние клиенты и инфраструктурный код.
- `supabase/` — функции и миграции.

## Локальные данные
Все изменения сначала пишутся в RxDB, UI обновляется оптимистично. Синхронизация включается автоматически при доступном Supabase.

## Демо‑режим
В демо‑режиме приложение использует сиды из `services/mockData.ts`. Синхронизация отключена.

## Добавление новых полей
Если добавляете поля:
- Обновите типы в `types.ts`.
- Обновите схемы в `db.ts`.
- Обновите мапперы `toRx` и `toSupabase` в `db.ts`.
- Добавьте миграцию в `supabase/migrations`.

## Изменение статусов и категорий
Статусы и категории описаны в `types.ts`. При их изменении обновите UI‑лейблы, сиды и RLS‑политики при необходимости.

## Диагностика
В демо‑режиме доступна кнопка запуска системной проверки. Она использует `services/testRunner.ts`.

## Стиль кода
- TypeScript используется во всех компонентах.
- Старайтесь держать компоненты небольшими и без лишней логики.
- Не храните секреты в коде.
